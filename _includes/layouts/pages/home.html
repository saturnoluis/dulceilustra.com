---
layout: layouts/main.html
---

<main class="home">
    <ul class="home__new-art">
        <li>
            <a href="/gallery" class="flex-column">
                <img
                    src="/images/dulceilustra__new-art-hero.png"
                    alt="Gallery"
                />
            </a>
        </li>
        {%- for item in collections.newArt -%}
        <li>
            <a
                href="/gallery#{{ item.fileSlug }}"
                class="home__gallery_link flex-column"
            >
                <img
                    src=".{{ item.url }}{{ item.data.cover }}"
                    alt="{{ item.data.title }} cover"
                />
            </a>
        </li>
        {%- endfor -%}
    </ul>

    <div class="flex-row">
        <video class="home__animation_video" autoplay loop muted playsinline>
            <source src="/media/home_animation.mp4" type="video/mp4" />
            Your browser does not support the video tag.
        </video>
        <div class="home__comics_title flex-column">
            <span class="es">Vi√±etas</span>
            <span class="en">Comics</span>
        </div>
        <div class="carousel flex-row">
            <div class="carousel__button-container">
                <button
                    class="carousel__button carousel__button--prev"
                    aria-label="Previous"
                >
                    &#9664;
                </button>
            </div>

            <div class="carousel__track-container">
                <div class="carousel__track">
                    {%- for item in collections.comics -%}
                    <div class="carousel__slide">
                        <a
                            href="/gallery#{{ item.fileSlug }}"
                            class="home__gallery_link"
                        >
                            <img
                                src=".{{ item.url }}{{ item.data.cover }}"
                                alt="{{ item.data.title }} cover"
                            />
                        </a>
                    </div>
                    {%- endfor -%}
                </div>
            </div>

            <div class="carousel__button-container">
                <button
                    class="carousel__button carousel__button--next"
                    aria-label="Next"
                >
                    &#9654;
                </button>
            </div>
        </div>
    </div>

    {{ content }}
</main>

<script>
    // Carousel functionality
    const track = document.querySelector('.carousel__track');
    const slides = Array.from(track.children);
    const nextButton = document.querySelector('.carousel__button--next');
    const prevButton = document.querySelector('.carousel__button--prev');
    
    let currentIndex = 0;
    
    const moveToSlide = (targetIndex) => {
        // Ensure index is within bounds
        if (targetIndex < 0) {
            targetIndex = 0;
        } else if (targetIndex >= slides.length) {
            targetIndex = slides.length - 1;
        }
        
        currentIndex = targetIndex;
        
        // Move the track
        const amountToMove = -100 * currentIndex;
        track.style.transform = `translateX(${amountToMove}%)`;
        
        // Update button states
        updateButtons();
    };
    
    const updateButtons = () => {
        // Disable prev button at start
        if (currentIndex === 0) {
            prevButton.disabled = true;
            prevButton.style.opacity = '0.3';
        } else {
            prevButton.disabled = false;
            prevButton.style.opacity = '1';
        }
        
        // Disable next button at end
        if (currentIndex === slides.length - 1) {
            nextButton.disabled = true;
            nextButton.style.opacity = '0.3';
        } else {
            nextButton.disabled = false;
            nextButton.style.opacity = '1';
        }
    };
    
    // Next button click
    nextButton.addEventListener('click', () => {
        moveToSlide(currentIndex + 1);
    });
    
    // Previous button click
    prevButton.addEventListener('click', () => {
        moveToSlide(currentIndex - 1);
    });
    
    // Initialize button states
    updateButtons();
</script>
