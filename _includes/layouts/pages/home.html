---
layout: layouts/main.html
---

<main class="home">
	<!-- New Art Section -->
	<ul class="home__new-art">
		<li>
			<a href="/gallery" class="home__gallery-link u-flex-row--start">
				<img class="home__new-art-decoration" src="/images/dulceilustra__estrellas.png" alt="Gallery" />
				<div class="home__new-art-text u-flex-column">
					{%- for i in (1..3) -%}
					<span class="es">Lo más reciente</span>
					<span class="en">New Art</span>
					{%- endfor -%}
				</div>
			</a>
		</li>
		{%- for item in collections.newArt -%}
		<li>
			<a href="{{ item.url }}" class="home__gallery-link-item u-flex-column">
				<img src=".{{ item.url }}{{ item.data.cover }}" alt="{{ item.data.title }} cover" />
			</a>
		</li>
		{%- endfor -%}
	</ul>

	<!-- Animation & Comics Carousel Section -->
	<div class="home__animation-comics u-flex-row">
		<!-- Home animation video -->
		<!-- Ideal resolution: 2880x2160 -->
		<video class="home__animation-video" autoplay loop muted playsinline>
			<source src="/media/home_animation.mp4" type="video/mp4" />
			Your browser does not support the video tag.
		</video>
		<!-- Comics Carousel -->
		<div class="u-flex-row">
			<div class="home__comics-title u-flex-column">
				<span class="es">Viñetas</span>
				<span class="en">Comics</span>
			</div>
			<div class="carousel u-flex-row">
				<div class="carousel__button-container">
					<button class="carousel__button carousel__button--prev" aria-label="Previous">
						&#9664;
					</button>
				</div>
				<div class="carousel__track-container">
					<div class="carousel__track">
						{%- for item in collections.comics -%}
						<div class="carousel__slide">
							<a href="/gallery#{{ item.url | replace: '/', '__' }}" class="home__gallery-link-item">
								<img src=".{{ item.url }}{{ item.data.cover }}" alt="{{ item.data.title }} cover" />
							</a>
						</div>
						{%- endfor -%}
					</div>
				</div>
				<div class="carousel__button-container">
					<button class="carousel__button carousel__button--next" aria-label="Next">
						&#9654;
					</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Contact Section -->
	<div class="home__contact-wrapper">
		<a href="" class="home__contact-section">
			<h1>
				<span class="es">Contácto</span>
				<span class="en">Contact</span>
			</h1>
			<img class="home__contact-image" src="/images/dulceilustra__contacto.gif" alt="Contacto: @dulceilustra" />
		</a>
		<div class="home__contact-section">
			<h1>
				<span class="es">Redes Sociales</span>
				<span class="en">Social Media</span>
			</h1>
			<ul class="home__social-media-list u-flex-column">
				<li class="home__social-media-item home__social-media-item--instagram">
					<a href="https://www.instagram.com/dulceilustra/" target="_blank" rel="noopener">
						@dulceilustra
					</a>
				</li>
				<li class="home__social-media-item home__social-media-item--tiktok">
					<a href="https://www.tiktok.com/@dulceilustra" target="_blank" rel="noopener">
						@dulceilustra
					</a>
				</li>
				<li class="home__social-media-item home__social-media-item--pinterest">
					<a href="https://www.pinterest.com/dulceilustra/" target="_blank" rel="noopener">
						@dulceilustra
					</a>
				</li>
			</ul>
		</div>
		<a href="/gallery" class="home__gallery-gallery">
			{%- for i in (1..2) -%}
			<span class="es">Galería</span>
			<span class="en">Gallery</span>
			{%- endfor -%}
		</a>
	</div>

	{{ content }}
</main>

<script>
	// Carousel functionality
	const track = document.querySelector(".carousel__track");
	const slides = Array.from(track.children);
	const nextButton = document.querySelector(".carousel__button--next");
	const prevButton = document.querySelector(".carousel__button--prev");
	const trackContainer = document.querySelector(".carousel__track-container");

	let currentIndex = 0;
	let touchStartX = 0;
	let touchEndX = 0;
	let isDragging = false;

	const moveToSlide = (targetIndex) => {
		// Wrap around if going past the end
		if (targetIndex >= slides.length) {
			targetIndex = 0;
		} else if (targetIndex < 0) {
			targetIndex = slides.length - 1;
		}

		currentIndex = targetIndex;

		const amountToMove = -100 * currentIndex;
		track.style.transform = `translateX(${amountToMove}%)`;
	};

	const handleSwipe = () => {
		// Minimum distance in pixels to trigger a swipe
		const swipeThreshold = 50;

		const diff = touchStartX - touchEndX;

		if (Math.abs(diff) > swipeThreshold) {
			if (diff > 0) {
				// Swiped left
				moveToSlide(currentIndex + 1);
			} else {
				// Swiped right
				moveToSlide(currentIndex - 1);
			}
		}
	};

	// Next button click
	nextButton.addEventListener("click", () => {
		moveToSlide(currentIndex + 1);
	});

	// Previous button click
	prevButton.addEventListener("click", () => {
		moveToSlide(currentIndex - 1);
	});

	// Touch events for mobile swipe
	trackContainer.addEventListener(
		"touchstart",
		(e) => {
			touchStartX = e.changedTouches[0].screenX;
			isDragging = true;
		},
		{passive: true},
	);

	trackContainer.addEventListener(
		"touchmove",
		(e) => {
			if (!isDragging) return;
			touchEndX = e.changedTouches[0].screenX;
		},
		{passive: true},
	);

	trackContainer.addEventListener("touchend", () => {
		if (!isDragging) return;
		isDragging = false;
		handleSwipe();
	});

	// Mouse events for desktop drag (optional, for better UX)
	trackContainer.addEventListener("mousedown", (e) => {
		touchStartX = e.screenX;
		isDragging = true;
		trackContainer.style.cursor = "grabbing";
	});

	trackContainer.addEventListener("mousemove", (e) => {
		if (!isDragging) return;
		touchEndX = e.screenX;
	});

	trackContainer.addEventListener("mouseup", () => {
		if (!isDragging) return;
		isDragging = false;
		trackContainer.style.cursor = "grab";
		handleSwipe();
	});

	trackContainer.addEventListener("mouseleave", () => {
		if (isDragging) {
			isDragging = false;
			trackContainer.style.cursor = "grab";
		}
	});

	// Set initial cursor style
	trackContainer.style.cursor = "grab";
</script>
